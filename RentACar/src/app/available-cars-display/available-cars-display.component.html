<app-navbar></app-navbar>

<div class="flex-container" style="margin-inline: 8%;">
    <!--AVAILABLE CARS-->
    <div class="flex-item-left" style="margin-block: 4%; padding-inline: 1%;">

        <!--SEARCH-->
        <div>
            <div class="d-flex flex-row">
                <mat-form-field class="example-form-field"
                    style="width: 56%; margin-right: 1%; margin-top: 2%; margin-bottom: 3%;">
                    <mat-label>Search</mat-label>
                    <input matInput type="text">
                    <button *ngIf="searchText" matSuffix mat-icon-button aria-label="Clear" [(ngModel)]="searchText"
                        (click)="searchText=''">
                        <mat-icon>close</mat-icon>
                    </button>
                </mat-form-field>
                <mat-form-field style="width: 18%; margin-right: 5%;">
                    <mat-select required>
                        <mat-option value="name">By Model</mat-option>
                        <mat-option value="search">By Address</mat-option>
                    </mat-select>
                </mat-form-field>
                <button mat-raised-button style="width:12%; height: 35px; margin-top: 1%;">Search</button>
            </div>
        </div>

        <table>
            <thead>
                <tr>
                    <th>Car model</th>
                    <th>Address</th>
                    <th class="price">Price</th>
                </tr>
            </thead>
            <tbody>
                <tr class=row (click)="showVehicle(vehicle)" *ngFor="let vehicle of vehicles">
                    <td>{{vehicle.model}}</td>
                    <td>{{vehicle.address.street}} {{vehicle.address.houseNumber}}, {{vehicle.address.town}},
                        {{vehicle.address.country}}</td>
                    <td class="price">&euro; {{vehicle.price}}</td>
                </tr>
            </tbody>
        </table>
    </div>

    <!--MAP-->
    <div class="flex-item-right" #map style="margin-block: 4%; padding-inline: 1%; height: 400px;"></div>
</div>

<!--MODAL-->
<div class="modal" [ngClass]="{ 'is-active' : isModalActive }">
    <div class="modal-background" (click)="toggleModal()"></div>
    <div class="modal-card" style="width: 40%;">
        <mat-card class="example-card" style="margin-inline:3%;">
            <mat-card-header>
                <mat-card-title>
                    {{selectedVehicle.model}}
                </mat-card-title>
                <mat-card-subtitle>Current location: {{selectedVehicle.address.street}}
                    {{selectedVehicle.address.houseNumber}}, {{selectedVehicle.address.town}},
                    {{selectedVehicle.address.country}}</mat-card-subtitle>
            </mat-card-header>
            <img mat-card-image src="../../assets/images/Volvo-XC40-white-scaled.jpg" alt="Photo of the vehicle"
                style="width: 100%; margin: 0%; margin-block: 3%;">
            <mat-card-content style="margin-bottom: 3%;">
                <p>
                    {{selectedVehicle.details}}
                </p>
                <br>
            </mat-card-content>
            <mat-card-actions>
                <span style="margin-block: 5%;"><span style="font-size: large; font-weight: 500; padding-inline: 2%;">{{selectedVehicle.price}}$</span>
                <span style="font-size: small;"> per day</span>
                <button mat-raised-button color="primary" style="float: right;" (click)="rentVehicle(selectedVehicle.id)">RENT</button></span>
            </mat-card-actions>
        </mat-card>

    </div>
</div>
